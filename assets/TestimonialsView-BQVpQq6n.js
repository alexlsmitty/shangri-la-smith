const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabase-gyfX3_XW.js","assets/vendor-fZwiNsBY.js","assets/styles/vendor-WOtlixU8.css"])))=>i.map(i=>d[i]);
import{_ as e,E as a,e as t,g as l,o as s,t as i,B as r,r as o,s as n,v as u,h as c,k as d,f as m,j as v,i as f,l as h,F as g,x as y,n as p,p as _}from"./vendor-fZwiNsBY.js";import{selectData as b}from"./supabase-gyfX3_XW.js";import{S as w}from"./SectionHeading-D5YfoI_z.js";import{_ as x}from"./index-CV7Tce-X.js";import"./ui-framework-B1OpzUlH.js";const k={async getTestimonials(e={}){try{const{limit:l=100,featured:s=!1,category:i="all"}=e,r={approved_at:{gt:"1970-01-01"}};s&&(r.is_featured=!0);let o={select:"*",filters:r,orderBy:"created_at",ascending:!1,limit:l};if("all"!==i)try{const e=(await this.getCategories()).find((e=>e.name===i));e&&(r.category_id=e.id)}catch(a){}const n=await b("testimonials",o);let u={};try{(await this.getCategories()).forEach((e=>{u[e.id]=e.name}))}catch(t){}return n.map((e=>({id:e.id,name:e.guest_name,location:e.guest_location,rating:e.rating,text:e.comment,category:e.category_id&&u[e.category_id]?u[e.category_id]:"General",featured:e.is_featured||!1,created_at:e.created_at,approved_at:e.approved_at})))}catch(a){return[]}},async getCategories(){try{return await b("testimonial_categories",{select:"*",orderBy:"name"})}catch(e){return[]}},async getCategoryNames(){try{return(await this.getCategories()).map((e=>e.name))}catch(e){return[]}},async submitTestimonial(a){try{let l=null;if(a.category)try{const e=(await this.getCategories()).find((e=>e.name===a.category));e&&(l=e.id)}catch(t){}const s={guest_name:a.name,guest_location:a.location||null,rating:a.rating,comment:a.text,category_id:l,created_at:(new Date).toISOString(),is_featured:!1},{getSupabase:i}=await e((async()=>{const{getSupabase:e}=await import("./supabase-gyfX3_XW.js");return{getSupabase:e}}),__vite__mapDeps([0,1,2])),r=i(),{data:o,error:n}=await r.from("testimonials").insert(s).select();if(n)throw n;return{success:!0,message:"Thank you for your testimonial! It will be reviewed and published soon.",data:o}}catch(l){return{success:!1,message:"There was an error submitting your testimonial. Please try again later."}}}},S=x({__name:"EmptyAvatar",props:{name:{type:String,required:!0},size:{type:Number,default:40}},setup(e){a((a=>({"3ffd740d":e.size+"px",f32c1336:e.size/2.2})));const o=e,n=t((()=>{if(!o.name)return"?";const e=o.name.split(" ");return 1===e.length?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()})),u=t((()=>{if(!o.name)return"#cccccc";const e=["#4CAF50","#2196F3","#9C27B0","#F44336","#FF9800","#00BCD4","#3F51B5","#009688","#E91E63","#607D8B"];let a=0;for(let t=0;t<o.name.length;t++)a=o.name.charCodeAt(t)+((a<<5)-a);return e[Math.abs(a)%e.length]}));return(e,a)=>(s(),l("div",{class:"empty-avatar",style:r({backgroundColor:u.value})},i(n.value),5))}},[["__scopeId","data-v-03b9860a"]]),V={class:"testimonials-hero-bg"},C={class:"testimonials-hero-overlay d-flex flex-column justify-center"},T={class:"testimonials-hero-content"},R={class:"mt-4"},z={class:"d-flex align-center mb-4"},L={class:"text-h6 font-weight-bold"},A={class:"text-subtitle-2"},E={class:"mb-4"},U={class:"text-caption ms-2"},F={class:"mt-4"},B={class:"d-flex align-center mb-3"},D={class:"text-subtitle-1 font-weight-bold"},Y={class:"text-caption"},q={class:"mb-3 d-flex align-center"},W={class:"text-caption ms-2"},j={class:"text-body-2 font-italic"},I={class:"py-12"},N={class:"d-flex align-center"},O={class:"text-subtitle-1 ms-2"},P=x({__name:"TestimonialsView",setup(e){const a=o([]),r=o(["all"]),b=o(!0),x=o(null),P=o("all"),G=o(0),H=o(""),K=o("newest"),M=o(1),Z=["all","Overall Experience","Accommodations","Dining","Spa Services","Family Experience","Activities","Special Occasions","Amenities"],J=o(!1),$=o(5),Q=o(""),X=o(""),ee=o(""),ae=o(""),te=o(!1),le=o(!1),se=o(null),ie=t((()=>{let e=[...a.value];if("all"!==P.value&&(e=e.filter((e=>e.category===P.value))),G.value>0&&(e=e.filter((e=>e.rating>=G.value))),H.value){const a=H.value.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(a)||e.text.toLowerCase().includes(a)||e.location.toLowerCase().includes(a)))}return"newest"===K.value?e.sort(((e,a)=>new Date(a.created_at)-new Date(e.created_at))):"highest"===K.value?e.sort(((e,a)=>a.rating-e.rating||new Date(a.created_at)-new Date(e.created_at))):"lowest"===K.value&&e.sort(((e,a)=>e.rating-a.rating||new Date(a.created_at)-new Date(e.created_at))),e})),re=t((()=>a.value.filter((e=>!0===e.featured)))),oe=t((()=>{const e=6*(M.value-1),a=e+6;return ie.value.slice(e,a)})),ne=o(null),ue=o(null),ce=o(null),de=async()=>{try{b.value=!0,x.value=null;const t=await k.getTestimonials();a.value=t;try{const e=await k.getCategoryNames();r.value=["all",...e]}catch(e){r.value=Z}b.value=!1}catch(t){x.value="Failed to load testimonials. Please try again later.",b.value=!1,r.value=Z}},me=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},ve=async()=>{try{le.value=!0,se.value=null;const e={name:Q.value,location:X.value,category:ee.value,rating:$.value,text:ae.value};await k.submitTestimonial(e);le.value=!1,te.value=!0,setTimeout((()=>{Q.value="",X.value="",ee.value="",$.value=5,ae.value="",te.value=!1,J.value=!1}),3e3)}catch(e){se.value="Failed to submit testimonial. Please try again later.",le.value=!1}},fe=()=>{P.value="all",G.value=0,H.value="",K.value="newest",M.value=1};return n((()=>{de(),setTimeout((()=>{if(b.value&&0===a.value.length){const e=[{id:1,name:"Sarah M.",location:"New York, USA",rating:5,text:"Our stay at Shangri La was absolutely perfect! The service was impeccable, the food was delicious, and the views were breathtaking. We especially loved relaxing by the infinity pool. We can't wait to return!",category:"Overall Experience",featured:!0,created_at:"2025-03-15T14:23:00.000Z"},{id:2,name:"John B.",location:"London, UK",rating:5,text:"The beachfront suite was amazing! Waking up to the sound of the waves and stepping right onto the sand was incredible. The resort offered so many activities, we never had a dull moment. Highly recommend the snorkeling!",category:"Accommodations",featured:!0,created_at:"2025-03-10T09:45:00.000Z"},{id:3,name:"Emily K.",location:"Toronto, Canada",rating:5,text:"We traveled with our two young children, and the Kids' Club was a lifesaver! The staff were fantastic, and our kids had a blast. This allowed us some much-needed relaxation time. The resort is very family-friendly.",category:"Family Experience",featured:!0,created_at:"2025-02-28T16:30:00.000Z"}];a.value=e,b.value=!1,x.value=null}}),3e3),u(ne,(([{isIntersecting:e}])=>{e&&document.querySelector(".testimonials-hero-content").classList.add("hero-visible")})),u(ue,(([{isIntersecting:e}])=>{e&&document.querySelectorAll(".featured-testimonial-card").forEach((e=>{e.classList.add("testimonial-visible")}))})),u(ce,(([{isIntersecting:e}])=>{e&&document.querySelectorAll(".testimonial-card").forEach((e=>{e.classList.add("testimonial-visible")}))}))})),(e,a)=>{const t=m("v-icon"),o=m("v-btn"),n=m("v-container"),u=m("v-progress-circular"),k=m("v-col"),Z=m("v-row"),he=m("v-alert"),ge=m("v-avatar"),ye=m("v-rating"),pe=m("v-chip"),_e=m("v-card-text"),be=m("v-card"),we=m("v-select"),xe=m("v-text-field"),ke=m("v-pagination"),Se=m("v-card-title"),Ve=m("v-textarea"),Ce=m("v-checkbox"),Te=m("v-form"),Re=m("v-dialog");return s(),c(n,{fluid:"",class:"pa-0"},{default:d((()=>[v("section",{ref_key:"heroSection",ref:ne,class:"testimonials-hero-section position-relative"},[v("div",V,[v("div",C,[f(n,null,{default:d((()=>[v("div",T,[a[20]||(a[20]=v("h1",{class:"text-h2 font-weight-bold mb-4 text-white"},"What Our Guests Are Saying",-1)),a[21]||(a[21]=v("div",{class:"title-underline bg-white mb-6"},null,-1)),a[22]||(a[22]=v("p",{class:"text-h6 mb-8 text-white max-width-text"}," Read about the wonderful experiences our guests have had at Shangri La Beach Resort. We are committed to creating unforgettable memories for every visitor. ",-1)),f(o,{color:"secondary",size:"large",class:"px-6 py-3 me-3",elevation:"3",rounded:"",onClick:a[0]||(a[0]=a=>e.$vuetify.goTo("#featured"))},{default:d((()=>[a[17]||(a[17]=h(" Read Testimonials ")),f(t,{right:"",class:"ml-2"},{default:d((()=>a[16]||(a[16]=[h("mdi-chevron-down")]))),_:1})])),_:1}),f(o,{color:"primary",size:"large",class:"px-6 py-3",elevation:"3",rounded:"",onClick:a[1]||(a[1]=e=>J.value=!0)},{default:d((()=>[a[19]||(a[19]=h(" Share Your Experience ")),f(t,{right:"",class:"ml-2"},{default:d((()=>a[18]||(a[18]=[h("mdi-pencil")]))),_:1})])),_:1})])])),_:1})])])],512),v("section",{id:"featured",ref_key:"featuredSection",ref:ue,class:"py-12"},[f(n,null,{default:d((()=>[f(w,{title:"Featured Guest Reviews",subtitle:"Discover what makes Shangri La Beach Resort a favorite destination for travelers around the world"}),b.value?(s(),c(Z,{key:0,class:"mt-8"},{default:d((()=>[f(k,{cols:"12",class:"text-center"},{default:d((()=>[f(u,{indeterminate:"",color:"primary",size:"64"}),a[23]||(a[23]=v("p",{class:"mt-4 text-body-1"},"Loading testimonials...",-1))])),_:1})])),_:1})):x.value?(s(),c(Z,{key:1,class:"mt-8"},{default:d((()=>[f(k,{cols:"12",class:"text-center"},{default:d((()=>[f(he,{type:"error",variant:"tonal",icon:"mdi-alert-circle",class:"mx-auto","max-width":"500"},{default:d((()=>[h(i(x.value)+" ",1),v("div",R,[f(o,{color:"primary",onClick:de},{default:d((()=>a[24]||(a[24]=[h(" Try Again ")]))),_:1})])])),_:1})])),_:1})])),_:1})):0===re.value.length?(s(),c(Z,{key:2,class:"mt-8"},{default:d((()=>[f(k,{cols:"12",class:"text-center"},{default:d((()=>[f(he,{type:"info",variant:"tonal",icon:"mdi-information",class:"mx-auto","max-width":"500"},{default:d((()=>a[25]||(a[25]=[h(" No featured testimonials available at the moment. ")]))),_:1})])),_:1})])),_:1})):(s(),c(Z,{key:3,class:"mt-8"},{default:d((()=>[(s(!0),l(g,null,y(re.value,(e=>(s(),c(k,{key:e.id,cols:"12",md:"4"},{default:d((()=>[f(be,{class:"featured-testimonial-card elevation-4 rounded-lg h-100 pa-6"},{default:d((()=>[v("div",z,[f(ge,{size:"60",class:"me-4"},{default:d((()=>[f(S,{name:e.name,size:60},null,8,["name"])])),_:2},1024),v("div",null,[v("div",L,i(e.name),1),v("div",A,i(e.location),1)])]),v("div",E,[f(ye,{"model-value":e.rating,color:"amber",density:"compact","half-increments":"",readonly:"",size:"small"},null,8,["model-value"]),v("span",U,i(me(e.created_at)),1)]),f(pe,{size:"small",color:"primary",variant:"flat",class:"mb-4"},{default:d((()=>[h(i(e.category),1)])),_:2},1024),f(_e,{class:"text-body-1 font-italic px-0"},{default:d((()=>[h(' "'+i(e.text)+'" ',1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}))])),_:1})],512),v("section",{ref_key:"testimonialSection",ref:ce,class:"py-12 bg-light-blue"},[f(n,null,{default:d((()=>[f(w,{title:"All Guest Reviews",subtitle:"Browse through experiences shared by our valued guests"}),f(Z,{class:"mb-6 mt-8"},{default:d((()=>[f(k,{cols:"12",sm:"6",md:"3"},{default:d((()=>[f(we,{modelValue:P.value,"onUpdate:modelValue":a[2]||(a[2]=e=>P.value=e),label:"Filter by Experience",items:r.value,variant:"outlined",density:"comfortable"},null,8,["modelValue","items"])])),_:1}),f(k,{cols:"12",sm:"6",md:"3"},{default:d((()=>[f(we,{modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=e=>G.value=e),label:"Filter by Rating",items:[{title:"All Ratings",value:0},{title:"5 Stars and Up",value:5},{title:"4 Stars and Up",value:4},{title:"3 Stars and Up",value:3}],"item-title":"title","item-value":"value",variant:"outlined",density:"comfortable"},null,8,["modelValue"])])),_:1}),f(k,{cols:"12",sm:"6",md:"3"},{default:d((()=>[f(we,{modelValue:K.value,"onUpdate:modelValue":a[4]||(a[4]=e=>K.value=e),label:"Sort By",items:[{title:"Newest First",value:"newest"},{title:"Highest Rating",value:"highest"},{title:"Lowest Rating",value:"lowest"}],"item-title":"title","item-value":"value",variant:"outlined",density:"comfortable"},null,8,["modelValue"])])),_:1}),f(k,{cols:"12",sm:"6",md:"3"},{default:d((()=>[f(xe,{modelValue:H.value,"onUpdate:modelValue":a[5]||(a[5]=e=>H.value=e),label:"Search Reviews","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"comfortable",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),b.value?(s(),c(Z,{key:0,class:"my-8"},{default:d((()=>[f(k,{cols:"12",class:"text-center"},{default:d((()=>[f(u,{indeterminate:"",color:"primary",size:"64"}),a[26]||(a[26]=v("p",{class:"mt-4 text-body-1"},"Loading testimonials...",-1))])),_:1})])),_:1})):x.value?(s(),c(Z,{key:1,class:"my-8"},{default:d((()=>[f(k,{cols:"12",class:"text-center"},{default:d((()=>[f(he,{type:"error",variant:"tonal",icon:"mdi-alert-circle",class:"mx-auto","max-width":"500"},{default:d((()=>[h(i(x.value)+" ",1),v("div",F,[f(o,{color:"primary",onClick:de},{default:d((()=>a[27]||(a[27]=[h(" Try Again ")]))),_:1})])])),_:1})])),_:1})])),_:1})):oe.value.length>0?(s(),c(Z,{key:2},{default:d((()=>[(s(!0),l(g,null,y(oe.value,(e=>(s(),c(k,{key:e.id,cols:"12",sm:"6",lg:"4",class:"mb-4"},{default:d((()=>[f(be,{class:"testimonial-card elevation-2 h-100 pa-4"},{default:d((()=>[v("div",B,[f(ge,{size:"50",class:"me-3"},{default:d((()=>[f(S,{name:e.name,size:50},null,8,["name"])])),_:2},1024),v("div",null,[v("div",D,i(e.name),1),v("div",Y,i(e.location),1)])]),v("div",q,[f(ye,{"model-value":e.rating,color:"amber",density:"compact","half-increments":"",readonly:"",size:"x-small"},null,8,["model-value"]),v("span",W,i(me(e.created_at)),1)]),f(pe,{size:"x-small",color:"primary",variant:"flat",class:"mb-3"},{default:d((()=>[h(i(e.category),1)])),_:2},1024),v("div",j,'"'+i(e.text)+'"',1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(s(),c(Z,{key:3},{default:d((()=>[f(k,{cols:"12",class:"text-center py-8"},{default:d((()=>[f(t,{size:"64",color:"grey"},{default:d((()=>a[28]||(a[28]=[h("mdi-emoticon-sad-outline")]))),_:1}),a[30]||(a[30]=v("h3",{class:"text-h5 mt-4 mb-2"},"No Reviews Found",-1)),a[31]||(a[31]=v("p",{class:"text-body-1"},"Please try changing your filters or search query.",-1)),f(o,{color:"primary",class:"mt-4",onClick:fe},{default:d((()=>a[29]||(a[29]=[h(" Reset Filters ")]))),_:1})])),_:1})])),_:1})),ie.value.length>6?(s(),c(Z,{key:4,class:"mt-6"},{default:d((()=>[f(k,{cols:"12",class:"text-center"},{default:d((()=>[f(ke,{modelValue:M.value,"onUpdate:modelValue":a[6]||(a[6]=e=>M.value=e),length:Math.ceil(ie.value.length/6),rounded:"",color:"primary"},null,8,["modelValue","length"])])),_:1})])),_:1})):p("",!0)])),_:1})],512),v("section",I,[f(n,null,{default:d((()=>[f(Z,null,{default:d((()=>[f(k,{cols:"12",md:"8","offset-md":"2",class:"text-center"},{default:d((()=>[f(be,{class:"elevation-3 rounded-lg pa-6"},{default:d((()=>[a[34]||(a[34]=v("h3",{class:"text-h4 font-weight-bold mb-4"},"Share Your Experience",-1)),a[35]||(a[35]=v("p",{class:"text-body-1 mb-6"}," Have you enjoyed your stay at Shangri La Beach Resort? We would love to hear from you! Share your experience and help future guests plan their perfect getaway. ",-1)),f(o,{color:"secondary",size:"large",class:"px-6 py-3",onClick:a[7]||(a[7]=e=>J.value=!0)},{default:d((()=>[a[33]||(a[33]=h(" Write a Review ")),f(t,{right:"",class:"ml-2"},{default:d((()=>a[32]||(a[32]=[h("mdi-pencil")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),f(Re,{modelValue:J.value,"onUpdate:modelValue":a[15]||(a[15]=e=>J.value=e),"max-width":"600",persistent:""},{default:d((()=>[f(be,{class:"pa-4"},{default:d((()=>[f(Se,{class:"text-h4 font-weight-bold"},{default:d((()=>[f(o,{icon:"",variant:"text",onClick:a[8]||(a[8]=e=>J.value=!1),class:"float-right"},{default:d((()=>[f(t,null,{default:d((()=>a[36]||(a[36]=[h("mdi-close")]))),_:1})])),_:1}),h(" "+i(te.value?"Thank You!":"Share Your Experience"),1)])),_:1}),te.value?(s(),c(_e,{key:1,class:"text-center pa-6"},{default:d((()=>[f(t,{color:"success",size:"64",class:"mb-4"},{default:d((()=>a[41]||(a[41]=[h("mdi-check-circle")]))),_:1}),a[43]||(a[43]=v("h3",{class:"text-h5 mb-4"},"Thank You for Your Review!",-1)),a[44]||(a[44]=v("p",{class:"text-body-1 mb-6"}," We appreciate you taking the time to share your experience at Shangri La Beach Resort. Your feedback is valuable to us and helps other travelers make informed decisions. ",-1)),a[45]||(a[45]=v("p",{class:"text-body-2 mb-6"}," Your review has been submitted and will be published after a quick review by our team. ",-1)),f(o,{color:"primary",onClick:a[14]||(a[14]=e=>J.value=!1)},{default:d((()=>a[42]||(a[42]=[h(" Close ")]))),_:1})])),_:1})):(s(),c(_e,{key:0},{default:d((()=>[a[40]||(a[40]=v("p",{class:"text-subtitle-1 mb-4"}," We appreciate your feedback. Your review will help us improve and assist future guests. ",-1)),se.value?(s(),c(he,{key:0,type:"error",variant:"tonal",icon:"mdi-alert-circle",class:"mb-4"},{default:d((()=>[h(i(se.value),1)])),_:1})):p("",!0),f(Te,{onSubmit:_(ve,["prevent"])},{default:d((()=>[f(Z,null,{default:d((()=>[f(k,{cols:"12"},{default:d((()=>[a[37]||(a[37]=v("label",{class:"text-subtitle-2 font-weight-bold mb-2 d-block"},"Your Rating",-1)),v("div",N,[f(ye,{modelValue:$.value,"onUpdate:modelValue":a[9]||(a[9]=e=>$.value=e),color:"amber",hover:"",size:"large"},null,8,["modelValue"]),v("span",O,i($.value)+" / 5",1)])])),_:1})])),_:1}),f(Z,null,{default:d((()=>[f(k,{cols:"12"},{default:d((()=>[f(xe,{modelValue:Q.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Q.value=e),label:"Your Name",required:""},null,8,["modelValue"])])),_:1})])),_:1}),f(Z,null,{default:d((()=>[f(k,{cols:"12",sm:"6"},{default:d((()=>[f(xe,{modelValue:X.value,"onUpdate:modelValue":a[11]||(a[11]=e=>X.value=e),label:"Location (City, Country)",required:""},null,8,["modelValue"])])),_:1}),f(k,{cols:"12",sm:"6"},{default:d((()=>[f(we,{modelValue:ee.value,"onUpdate:modelValue":a[12]||(a[12]=e=>ee.value=e),label:"Experience Type",items:r.value.filter((e=>"all"!==e)),required:""},null,8,["modelValue","items"])])),_:1})])),_:1}),f(Z,null,{default:d((()=>[f(k,{cols:"12"},{default:d((()=>[f(Ve,{modelValue:ae.value,"onUpdate:modelValue":a[13]||(a[13]=e=>ae.value=e),label:"Your Review",rows:"5",required:"",counter:"500",hint:"Share your experience at Shangri La Beach Resort"},null,8,["modelValue"])])),_:1})])),_:1}),f(Z,null,{default:d((()=>[f(k,{cols:"12"},{default:d((()=>[f(Ce,{label:"I confirm that this is an honest review based on my own experience",required:""})])),_:1})])),_:1}),f(Z,null,{default:d((()=>[f(k,{cols:"12",class:"text-center"},{default:d((()=>[f(o,{color:"primary",size:"large",class:"px-8",type:"submit",loading:le.value,disabled:!(Q.value&&X.value&&ee.value&&ae.value)},{default:d((()=>[a[39]||(a[39]=h(" Submit Review ")),f(t,{right:"",class:"ml-2"},{default:d((()=>a[38]||(a[38]=[h("mdi-send")]))),_:1})])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-cd72bcd5"]]);export{P as default};
