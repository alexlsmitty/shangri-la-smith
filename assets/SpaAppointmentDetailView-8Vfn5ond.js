import{_ as e,S as a}from"./index-D-3aAWvc.js";import{r as l,s as t,h as i,k as s,f as n,o as c,g as o,n as d,i as r,j as u,l as v,t as m}from"./vendor-CRTejrwt.js";import"./ui-framework-zg02FQwb.js";const p={key:0,class:"text-center py-8"},f={key:1,class:"text-center py-8"},_={class:"d-flex justify-center"},y={key:2},b={class:"d-flex justify-space-between align-center mb-6"},g={class:"py-2 appointment-details"},h={class:"detail-item"},x={class:"detail-value"},w={class:"detail-item"},k={class:"detail-value"},A={class:"detail-item"},C={class:"detail-value"},D={class:"detail-item"},S={class:"detail-value"},j={class:"detail-item"},q={class:"detail-value font-weight-bold"},P={key:0,class:"detail-item"},z={class:"detail-value"},B={class:"special-requests"},E={key:0},R={key:1,class:"text-body-2 text-grey"},T={class:"detail-item"},G={class:"detail-value"},I={class:"detail-item"},L={class:"detail-value"},N={class:"detail-item"},F={class:"detail-value"},U={class:"text-body-2 mb-2"},V={class:"text-body-2 mb-2"},$={class:"text-body-2"},H=e({__name:"SpaAppointmentDetailView",props:{reference:{type:String,required:!0}},setup(e){const H=e,J=l(null),K=l(!0),M=l(null);async function O(){var e,l;K.value=!0,M.value=null;try{const e=await a.getAppointmentByReference(H.reference);J.value=e}catch(t){console.error("Error fetching appointment details:",t),M.value=(null==(l=null==(e=t.response)?void 0:e.data)?void 0:l.error)||"Unable to load appointment details. Please try again later."}finally{K.value=!1}}async function Q(){if(confirm("Are you sure you want to cancel this appointment? This action cannot be undone."))try{await a.cancelAppointment(H.reference),await O()}catch(e){console.error("Error cancelling appointment:",e),alert("Failed to cancel appointment. Please try again later.")}}function W(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}return t((()=>{O()})),(e,a)=>{const l=n("v-progress-circular"),t=n("v-alert"),H=n("v-btn"),X=n("v-chip"),Y=n("v-card-title"),Z=n("v-card-subtitle"),ee=n("v-card-item"),ae=n("v-img"),le=n("v-col"),te=n("v-row"),ie=n("v-divider"),se=n("v-card-text"),ne=n("v-card-actions"),ce=n("v-card"),oe=n("v-icon"),de=n("v-container");return c(),i(de,{class:"appointment-detail-view py-8"},{default:s((()=>[K.value?(c(),o("div",p,[r(l,{indeterminate:"",color:"primary",size:"64"}),a[0]||(a[0]=u("p",{class:"text-body-1 mt-4"},"Loading appointment details...",-1))])):M.value?(c(),o("div",f,[r(t,{type:"error",variant:"tonal",class:"mb-4"},{default:s((()=>[v(m(M.value),1)])),_:1}),u("div",_,[r(H,{color:"primary",onClick:O,class:"mr-2"},{default:s((()=>a[1]||(a[1]=[v("Try Again")]))),_:1}),r(H,{color:"secondary",to:"/my-account"},{default:s((()=>a[2]||(a[2]=[v("Back to Account")]))),_:1})])])):J.value?(c(),o("div",y,[u("div",b,[a[4]||(a[4]=u("h1",{class:"text-h4 font-weight-bold"},"Spa Appointment Details",-1)),r(H,{variant:"text",color:"primary",to:"/my-account","prepend-icon":"mdi-arrow-left"},{default:s((()=>a[3]||(a[3]=[v(" Back to Account ")]))),_:1})]),r(te,null,{default:s((()=>[r(le,{cols:"12",md:"8"},{default:s((()=>[r(ce,{class:"mb-6"},{default:s((()=>[r(ee,null,{default:s((()=>[r(Y,{class:"text-h5 font-weight-bold d-flex align-center"},{default:s((()=>[v(m(J.value.service_name)+" ",1),r(X,{color:"confirmed"===J.value.status?"success":"error",class:"ml-3"},{default:s((()=>[v(m("confirmed"===J.value.status?"Confirmed":"Cancelled"),1)])),_:1},8,["color"])])),_:1}),r(Z,null,{default:s((()=>[v("Booking Reference: "+m(J.value.booking_reference),1)])),_:1})])),_:1}),r(se,null,{default:s((()=>[r(te,null,{default:s((()=>[r(le,{cols:"12",sm:"6"},{default:s((()=>[r(ae,{src:J.value.image_url,height:"250",cover:"",class:"rounded-lg mb-4"},null,8,["src"])])),_:1}),r(le,{cols:"12",sm:"6"},{default:s((()=>[u("div",g,[a[11]||(a[11]=u("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Appointment Details",-1)),u("div",h,[a[5]||(a[5]=u("div",{class:"detail-label"},"Date:",-1)),u("div",x,m(W(J.value.appointment_date)),1)]),u("div",w,[a[6]||(a[6]=u("div",{class:"detail-label"},"Time:",-1)),u("div",k,m(J.value.appointment_time),1)]),u("div",A,[a[7]||(a[7]=u("div",{class:"detail-label"},"Duration:",-1)),u("div",C,m(J.value.duration),1)]),u("div",D,[a[8]||(a[8]=u("div",{class:"detail-label"},"Service Category:",-1)),u("div",S,m(J.value.category_name),1)]),u("div",j,[a[9]||(a[9]=u("div",{class:"detail-label"},"Price:",-1)),u("div",q,"$"+m(J.value.price),1)]),"cancelled"===J.value.status?(c(),o("div",P,[a[10]||(a[10]=u("div",{class:"detail-label"},"Cancelled Date:",-1)),u("div",z,m(W(J.value.cancelled_date)),1)])):d("",!0)])])),_:1})])),_:1}),r(ie,{class:"my-4"}),u("div",B,[a[12]||(a[12]=u("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Special Requests",-1)),J.value.special_requests?(c(),o("p",E,m(J.value.special_requests),1)):(c(),o("p",R,"No special requests"))])])),_:1}),"confirmed"===J.value.status?(c(),i(ne,{key:0},{default:s((()=>[r(H,{color:"error",variant:"outlined",onClick:Q},{default:s((()=>a[13]||(a[13]=[v(" Cancel Appointment ")]))),_:1})])),_:1})):d("",!0)])),_:1})])),_:1}),r(le,{cols:"12",md:"4"},{default:s((()=>[r(ce,null,{default:s((()=>[r(ee,null,{default:s((()=>[r(Y,{class:"text-h6 font-weight-bold"},{default:s((()=>a[14]||(a[14]=[v("Guest Information")]))),_:1})])),_:1}),r(se,null,{default:s((()=>[u("div",T,[a[15]||(a[15]=u("div",{class:"detail-label"},"Name:",-1)),u("div",G,m(J.value.guest_name),1)]),u("div",I,[a[16]||(a[16]=u("div",{class:"detail-label"},"Email:",-1)),u("div",L,m(J.value.guest_email),1)]),u("div",N,[a[17]||(a[17]=u("div",{class:"detail-label"},"Phone:",-1)),u("div",F,m(J.value.guest_phone),1)])])),_:1})])),_:1}),r(ce,{class:"mt-4"},{default:s((()=>[r(ee,null,{default:s((()=>[r(Y,{class:"text-h6 font-weight-bold"},{default:s((()=>a[18]||(a[18]=[v("Appointment Policy")]))),_:1})])),_:1}),r(se,null,{default:s((()=>[u("p",U,[r(oe,{start:"",size:"small",color:"info"},{default:s((()=>a[19]||(a[19]=[v("mdi-information")]))),_:1}),a[20]||(a[20]=v(" Please arrive 15 minutes prior to your scheduled appointment time. "))]),u("p",V,[r(oe,{start:"",size:"small",color:"info"},{default:s((()=>a[21]||(a[21]=[v("mdi-information")]))),_:1}),a[22]||(a[22]=v(" Cancellations must be made at least 24 hours in advance to avoid charges. "))]),u("p",$,[r(oe,{start:"",size:"small",color:"info"},{default:s((()=>a[23]||(a[23]=[v("mdi-information")]))),_:1}),a[24]||(a[24]=v(" Gratuity is not included in the service price. "))])])),_:1})])),_:1})])),_:1})])),_:1})])):d("",!0)])),_:1})}}},[["__scopeId","data-v-5e206d25"]]);export{H as default};
