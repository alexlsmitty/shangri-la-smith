import{_ as j,r as k,m as G,d as S,g as o,S as B,a,o as d,b as u,i as h,e as s,f as e,h as n,t as i}from"./main.DrHvUXgs.js";const I={key:0,class:"text-center py-8"},F={key:1,class:"text-center py-8"},M={class:"d-flex justify-center"},U={key:2},$={class:"d-flex justify-space-between align-center mb-6"},H={class:"py-2 appointment-details"},J={class:"detail-item"},K={class:"detail-value"},O={class:"detail-item"},Q={class:"detail-value"},W={class:"detail-item"},X={class:"detail-value"},Y={class:"detail-item"},Z={class:"detail-value"},tt={class:"detail-item"},et={class:"detail-value font-weight-bold"},st={key:0,class:"detail-item"},ot={class:"detail-value"},lt={class:"special-requests"},at={key:0},nt={key:1,class:"text-body-2 text-grey"},it={class:"detail-item"},dt={class:"detail-value"},rt={class:"detail-item"},ct={class:"detail-value"},ut={class:"detail-item"},vt={class:"detail-value"},_t={class:"text-body-2 mb-2"},mt={class:"text-body-2 mb-2"},pt={class:"text-body-2"},ft={__name:"SpaAppointmentDetailView",props:{reference:{type:String,required:!0}},setup(q){const A=q,l=k(null),p=k(!0),v=k(null);async function f(){var r,t;p.value=!0,v.value=null;try{const c=await B.getAppointmentByReference(A.reference);l.value=c}catch(c){console.error("Error fetching appointment details:",c),v.value=((t=(r=c.response)==null?void 0:r.data)==null?void 0:t.error)||"Unable to load appointment details. Please try again later."}finally{p.value=!1}}async function N(){if(confirm("Are you sure you want to cancel this appointment? This action cannot be undone."))try{await B.cancelAppointment(A.reference),await f()}catch(r){console.error("Error cancelling appointment:",r),alert("Failed to cancel appointment. Please try again later.")}}function D(r){const t={year:"numeric",month:"long",day:"numeric"};return new Date(r).toLocaleDateString(void 0,t)}return G(()=>{f()}),(r,t)=>{const c=a("v-progress-circular"),P=a("v-alert"),_=a("v-btn"),V=a("v-chip"),y=a("v-card-title"),z=a("v-card-subtitle"),b=a("v-card-item"),E=a("v-img"),m=a("v-col"),C=a("v-row"),T=a("v-divider"),g=a("v-card-text"),L=a("v-card-actions"),x=a("v-card"),w=a("v-icon"),R=a("v-container");return d(),S(R,{class:"appointment-detail-view py-8"},{default:o(()=>[p.value?(d(),u("div",I,[s(c,{indeterminate:"",color:"primary",size:"64"}),t[0]||(t[0]=e("p",{class:"text-body-1 mt-4"},"Loading appointment details...",-1))])):v.value?(d(),u("div",F,[s(P,{type:"error",variant:"tonal",class:"mb-4"},{default:o(()=>[n(i(v.value),1)]),_:1}),e("div",M,[s(_,{color:"primary",onClick:f,class:"mr-2"},{default:o(()=>t[1]||(t[1]=[n("Try Again")])),_:1}),s(_,{color:"secondary",to:"/my-account"},{default:o(()=>t[2]||(t[2]=[n("Back to Account")])),_:1})])])):l.value?(d(),u("div",U,[e("div",$,[t[4]||(t[4]=e("h1",{class:"text-h4 font-weight-bold"},"Spa Appointment Details",-1)),s(_,{variant:"text",color:"primary",to:"/my-account","prepend-icon":"mdi-arrow-left"},{default:o(()=>t[3]||(t[3]=[n(" Back to Account ")])),_:1})]),s(C,null,{default:o(()=>[s(m,{cols:"12",md:"8"},{default:o(()=>[s(x,{class:"mb-6"},{default:o(()=>[s(b,null,{default:o(()=>[s(y,{class:"text-h5 font-weight-bold d-flex align-center"},{default:o(()=>[n(i(l.value.service_name)+" ",1),s(V,{color:l.value.status==="confirmed"?"success":"error",class:"ml-3"},{default:o(()=>[n(i(l.value.status==="confirmed"?"Confirmed":"Cancelled"),1)]),_:1},8,["color"])]),_:1}),s(z,null,{default:o(()=>[n("Booking Reference: "+i(l.value.booking_reference),1)]),_:1})]),_:1}),s(g,null,{default:o(()=>[s(C,null,{default:o(()=>[s(m,{cols:"12",sm:"6"},{default:o(()=>[s(E,{src:l.value.image_url,height:"250",cover:"",class:"rounded-lg mb-4"},null,8,["src"])]),_:1}),s(m,{cols:"12",sm:"6"},{default:o(()=>[e("div",H,[t[11]||(t[11]=e("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Appointment Details",-1)),e("div",J,[t[5]||(t[5]=e("div",{class:"detail-label"},"Date:",-1)),e("div",K,i(D(l.value.appointment_date)),1)]),e("div",O,[t[6]||(t[6]=e("div",{class:"detail-label"},"Time:",-1)),e("div",Q,i(l.value.appointment_time),1)]),e("div",W,[t[7]||(t[7]=e("div",{class:"detail-label"},"Duration:",-1)),e("div",X,i(l.value.duration),1)]),e("div",Y,[t[8]||(t[8]=e("div",{class:"detail-label"},"Service Category:",-1)),e("div",Z,i(l.value.category_name),1)]),e("div",tt,[t[9]||(t[9]=e("div",{class:"detail-label"},"Price:",-1)),e("div",et,"$"+i(l.value.price),1)]),l.value.status==="cancelled"?(d(),u("div",st,[t[10]||(t[10]=e("div",{class:"detail-label"},"Cancelled Date:",-1)),e("div",ot,i(D(l.value.cancelled_date)),1)])):h("",!0)])]),_:1})]),_:1}),s(T,{class:"my-4"}),e("div",lt,[t[12]||(t[12]=e("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Special Requests",-1)),l.value.special_requests?(d(),u("p",at,i(l.value.special_requests),1)):(d(),u("p",nt,"No special requests"))])]),_:1}),l.value.status==="confirmed"?(d(),S(L,{key:0},{default:o(()=>[s(_,{color:"error",variant:"outlined",onClick:N},{default:o(()=>t[13]||(t[13]=[n(" Cancel Appointment ")])),_:1})]),_:1})):h("",!0)]),_:1})]),_:1}),s(m,{cols:"12",md:"4"},{default:o(()=>[s(x,null,{default:o(()=>[s(b,null,{default:o(()=>[s(y,{class:"text-h6 font-weight-bold"},{default:o(()=>t[14]||(t[14]=[n("Guest Information")])),_:1})]),_:1}),s(g,null,{default:o(()=>[e("div",it,[t[15]||(t[15]=e("div",{class:"detail-label"},"Name:",-1)),e("div",dt,i(l.value.guest_name),1)]),e("div",rt,[t[16]||(t[16]=e("div",{class:"detail-label"},"Email:",-1)),e("div",ct,i(l.value.guest_email),1)]),e("div",ut,[t[17]||(t[17]=e("div",{class:"detail-label"},"Phone:",-1)),e("div",vt,i(l.value.guest_phone),1)])]),_:1})]),_:1}),s(x,{class:"mt-4"},{default:o(()=>[s(b,null,{default:o(()=>[s(y,{class:"text-h6 font-weight-bold"},{default:o(()=>t[18]||(t[18]=[n("Appointment Policy")])),_:1})]),_:1}),s(g,null,{default:o(()=>[e("p",_t,[s(w,{start:"",size:"small",color:"info"},{default:o(()=>t[19]||(t[19]=[n("mdi-information")])),_:1}),t[20]||(t[20]=n(" Please arrive 15 minutes prior to your scheduled appointment time. "))]),e("p",mt,[s(w,{start:"",size:"small",color:"info"},{default:o(()=>t[21]||(t[21]=[n("mdi-information")])),_:1}),t[22]||(t[22]=n(" Cancellations must be made at least 24 hours in advance to avoid charges. "))]),e("p",pt,[s(w,{start:"",size:"small",color:"info"},{default:o(()=>t[23]||(t[23]=[n("mdi-information")])),_:1}),t[24]||(t[24]=n(" Gratuity is not included in the service price. "))])]),_:1})]),_:1})]),_:1})]),_:1})])):h("",!0)]),_:1})}}},bt=j(ft,[["__scopeId","data-v-5e206d25"]]);export{bt as default};
