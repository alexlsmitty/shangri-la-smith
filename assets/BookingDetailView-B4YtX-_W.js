import{_ as j,r as b,m as G,d as D,g as s,B as q,a as i,o as d,b as u,i as y,e as o,f as t,h as n,t as a}from"./index-BDwX7PDV.js";const I={key:0,class:"text-center py-8"},M={key:1,class:"text-center py-8"},z={class:"d-flex justify-center"},F={key:2},U={class:"d-flex justify-space-between align-center mb-6"},$={class:"py-2 booking-details"},H={class:"detail-item"},J={class:"detail-value"},K={class:"detail-item"},O={class:"detail-value"},Q={class:"detail-item"},W={class:"detail-value"},X={class:"detail-item"},Y={class:"detail-value font-weight-bold"},Z={class:"detail-item"},ee={class:"detail-value"},te={class:"detail-item"},oe={class:"detail-value"},le={key:0,class:"detail-item"},se={class:"detail-value"},ae={class:"special-requests"},ie={key:0},ne={key:1,class:"text-body-2 text-grey"},de={class:"detail-item"},ce={class:"detail-value"},re={class:"detail-item"},ue={class:"detail-value"},_e={class:"detail-item"},ve={class:"detail-value"},me={__name:"BookingDetailView",props:{reference:{type:String,required:!0}},setup(N){const k=N,l=b(null),p=b(!0),_=b(null);async function g(){var c,e;p.value=!0,_.value=null;try{const r=await q.getBookingByReference(k.reference);l.value=r}catch(r){console.error("Error fetching booking details:",r),_.value=((e=(c=r.response)==null?void 0:c.data)==null?void 0:e.error)||"Unable to load booking details. Please try again later."}finally{p.value=!1}}async function S(){if(confirm("Are you sure you want to cancel this booking? This action cannot be undone."))try{await q.cancelBooking(k.reference),await g()}catch(c){console.error("Error cancelling booking:",c),alert("Failed to cancel booking. Please try again later.")}}function v(c){const e={year:"numeric",month:"long",day:"numeric"};return new Date(c).toLocaleDateString(void 0,e)}return G(()=>{g()}),(c,e)=>{const r=i("v-progress-circular"),V=i("v-alert"),m=i("v-btn"),P=i("v-chip"),h=i("v-card-title"),A=i("v-card-subtitle"),x=i("v-card-item"),E=i("v-img"),f=i("v-col"),w=i("v-row"),T=i("v-divider"),B=i("v-card-text"),L=i("v-card-actions"),C=i("v-card"),R=i("v-container");return d(),D(R,{class:"booking-detail-view py-8"},{default:s(()=>[p.value?(d(),u("div",I,[o(r,{indeterminate:"",color:"primary",size:"64"}),e[0]||(e[0]=t("p",{class:"text-body-1 mt-4"},"Loading booking details...",-1))])):_.value?(d(),u("div",M,[o(V,{type:"error",variant:"tonal",class:"mb-4"},{default:s(()=>[n(a(_.value),1)]),_:1}),t("div",z,[o(m,{color:"primary",onClick:g,class:"mr-2"},{default:s(()=>e[1]||(e[1]=[n("Try Again")])),_:1}),o(m,{color:"secondary",to:"/my-account"},{default:s(()=>e[2]||(e[2]=[n("Back to Account")])),_:1})])])):l.value?(d(),u("div",F,[t("div",U,[e[4]||(e[4]=t("h1",{class:"text-h4 font-weight-bold"},"Booking Details",-1)),o(m,{variant:"text",color:"primary",to:"/my-account","prepend-icon":"mdi-arrow-left"},{default:s(()=>e[3]||(e[3]=[n(" Back to Account ")])),_:1})]),o(w,null,{default:s(()=>[o(f,{cols:"12",md:"8"},{default:s(()=>[o(C,{class:"mb-6"},{default:s(()=>[o(x,null,{default:s(()=>[o(h,{class:"text-h5 font-weight-bold d-flex align-center"},{default:s(()=>[n(a(l.value.room_name)+" ",1),o(P,{color:l.value.status==="confirmed"?"success":"error",class:"ml-3"},{default:s(()=>[n(a(l.value.status==="confirmed"?"Confirmed":"Cancelled"),1)]),_:1},8,["color"])]),_:1}),o(A,null,{default:s(()=>[n("Booking Reference: "+a(l.value.booking_reference),1)]),_:1})]),_:1}),o(B,null,{default:s(()=>[o(w,null,{default:s(()=>[o(f,{cols:"12",sm:"6"},{default:s(()=>[o(E,{src:l.value.room_image,height:"250",cover:"",class:"rounded-lg mb-4"},null,8,["src"])]),_:1}),o(f,{cols:"12",sm:"6"},{default:s(()=>[t("div",$,[e[12]||(e[12]=t("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Stay Details",-1)),t("div",H,[e[5]||(e[5]=t("div",{class:"detail-label"},"Check-in:",-1)),t("div",J,a(v(l.value.check_in_date)),1)]),t("div",K,[e[6]||(e[6]=t("div",{class:"detail-label"},"Check-out:",-1)),t("div",O,a(v(l.value.check_out_date)),1)]),t("div",Q,[e[7]||(e[7]=t("div",{class:"detail-label"},"Guests:",-1)),t("div",W,a(l.value.adults)+" adults, "+a(l.value.children)+" children",1)]),t("div",X,[e[8]||(e[8]=t("div",{class:"detail-label"},"Total Price:",-1)),t("div",Y,"$"+a(l.value.total_price),1)]),t("div",Z,[e[9]||(e[9]=t("div",{class:"detail-label"},"Payment Method:",-1)),t("div",ee,a(l.value.payment_method),1)]),t("div",te,[e[10]||(e[10]=t("div",{class:"detail-label"},"Booking Date:",-1)),t("div",oe,a(v(l.value.booking_date)),1)]),l.value.status==="cancelled"?(d(),u("div",le,[e[11]||(e[11]=t("div",{class:"detail-label"},"Cancelled Date:",-1)),t("div",se,a(v(l.value.cancelled_date)),1)])):y("",!0)])]),_:1})]),_:1}),o(T,{class:"my-4"}),t("div",ae,[e[13]||(e[13]=t("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Special Requests",-1)),l.value.special_requests?(d(),u("p",ie,a(l.value.special_requests),1)):(d(),u("p",ne,"No special requests"))])]),_:1}),l.value.status==="confirmed"?(d(),D(L,{key:0},{default:s(()=>[o(m,{color:"error",variant:"outlined",onClick:S},{default:s(()=>e[14]||(e[14]=[n(" Cancel Booking ")])),_:1})]),_:1})):y("",!0)]),_:1})]),_:1}),o(f,{cols:"12",md:"4"},{default:s(()=>[o(C,null,{default:s(()=>[o(x,null,{default:s(()=>[o(h,{class:"text-h6 font-weight-bold"},{default:s(()=>e[15]||(e[15]=[n("Guest Information")])),_:1})]),_:1}),o(B,null,{default:s(()=>[t("div",de,[e[16]||(e[16]=t("div",{class:"detail-label"},"Name:",-1)),t("div",ce,a(l.value.first_name)+" "+a(l.value.last_name),1)]),t("div",re,[e[17]||(e[17]=t("div",{class:"detail-label"},"Email:",-1)),t("div",ue,a(l.value.email),1)]),t("div",_e,[e[18]||(e[18]=t("div",{class:"detail-label"},"Phone:",-1)),t("div",ve,a(l.value.phone),1)])]),_:1})]),_:1})]),_:1})]),_:1})])):y("",!0)]),_:1})}}},pe=j(me,[["__scopeId","data-v-235ae309"]]);export{pe as default};
