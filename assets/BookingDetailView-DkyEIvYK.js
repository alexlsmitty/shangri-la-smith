import{_ as e,B as a}from"./index-DRUvcVH0.js";import{r as l,s as t,h as s,k as i,f as c,o as d,g as o,n,i as r,j as u,l as v,t as m}from"./vendor-D4bag4fh.js";import"./ui-framework-CtCINhif.js";const f={key:0,class:"text-center py-8"},_={key:1,class:"text-center py-8"},y={class:"d-flex justify-center"},b={key:2},g={class:"d-flex justify-space-between align-center mb-6"},p={class:"py-2 booking-details"},k={class:"detail-item"},h={class:"detail-value"},w={class:"detail-item"},x={class:"detail-value"},B={class:"detail-item"},C={class:"detail-value"},D={class:"detail-item"},j={class:"detail-value font-weight-bold"},q={class:"detail-item"},P={class:"detail-value"},A={class:"detail-item"},S={class:"detail-value"},R={key:0,class:"detail-item"},T={class:"detail-value"},G={class:"special-requests"},I={key:0},L={key:1,class:"text-body-2 text-grey"},N={class:"detail-item"},z={class:"detail-value"},E={class:"detail-item"},F={class:"detail-value"},M={class:"detail-item"},U={class:"detail-value"},V=e({__name:"BookingDetailView",props:{reference:{type:String,required:!0}},setup(e){const V=e,$=l(null),H=l(!0),J=l(null);async function K(){var e,l;H.value=!0,J.value=null;try{const e=await a.getBookingByReference(V.reference);$.value=e}catch(t){J.value=(null==(l=null==(e=t.response)?void 0:e.data)?void 0:l.error)||"Unable to load booking details. Please try again later."}finally{H.value=!1}}async function O(){if(confirm("Are you sure you want to cancel this booking? This action cannot be undone."))try{await a.cancelBooking(V.reference),await K()}catch(e){alert("Failed to cancel booking. Please try again later.")}}function Q(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}return t((()=>{K()})),(e,a)=>{const l=c("v-progress-circular"),t=c("v-alert"),V=c("v-btn"),W=c("v-chip"),X=c("v-card-title"),Y=c("v-card-subtitle"),Z=c("v-card-item"),ee=c("v-img"),ae=c("v-col"),le=c("v-row"),te=c("v-divider"),se=c("v-card-text"),ie=c("v-card-actions"),ce=c("v-card"),de=c("v-container");return d(),s(de,{class:"booking-detail-view py-8"},{default:i((()=>[H.value?(d(),o("div",f,[r(l,{indeterminate:"",color:"primary",size:"64"}),a[0]||(a[0]=u("p",{class:"text-body-1 mt-4"},"Loading booking details...",-1))])):J.value?(d(),o("div",_,[r(t,{type:"error",variant:"tonal",class:"mb-4"},{default:i((()=>[v(m(J.value),1)])),_:1}),u("div",y,[r(V,{color:"primary",onClick:K,class:"mr-2"},{default:i((()=>a[1]||(a[1]=[v("Try Again")]))),_:1}),r(V,{color:"secondary",to:"/my-account"},{default:i((()=>a[2]||(a[2]=[v("Back to Account")]))),_:1})])])):$.value?(d(),o("div",b,[u("div",g,[a[4]||(a[4]=u("h1",{class:"text-h4 font-weight-bold"},"Booking Details",-1)),r(V,{variant:"text",color:"primary",to:"/my-account","prepend-icon":"mdi-arrow-left"},{default:i((()=>a[3]||(a[3]=[v(" Back to Account ")]))),_:1})]),r(le,null,{default:i((()=>[r(ae,{cols:"12",md:"8"},{default:i((()=>[r(ce,{class:"mb-6"},{default:i((()=>[r(Z,null,{default:i((()=>[r(X,{class:"text-h5 font-weight-bold d-flex align-center"},{default:i((()=>[v(m($.value.room_name)+" ",1),r(W,{color:"confirmed"===$.value.status?"success":"error",class:"ml-3"},{default:i((()=>[v(m("confirmed"===$.value.status?"Confirmed":"Cancelled"),1)])),_:1},8,["color"])])),_:1}),r(Y,null,{default:i((()=>[v("Booking Reference: "+m($.value.booking_reference),1)])),_:1})])),_:1}),r(se,null,{default:i((()=>[r(le,null,{default:i((()=>[r(ae,{cols:"12",sm:"6"},{default:i((()=>[r(ee,{src:$.value.room_image,height:"250",cover:"",class:"rounded-lg mb-4"},null,8,["src"])])),_:1}),r(ae,{cols:"12",sm:"6"},{default:i((()=>[u("div",p,[a[12]||(a[12]=u("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Stay Details",-1)),u("div",k,[a[5]||(a[5]=u("div",{class:"detail-label"},"Check-in:",-1)),u("div",h,m(Q($.value.check_in_date)),1)]),u("div",w,[a[6]||(a[6]=u("div",{class:"detail-label"},"Check-out:",-1)),u("div",x,m(Q($.value.check_out_date)),1)]),u("div",B,[a[7]||(a[7]=u("div",{class:"detail-label"},"Guests:",-1)),u("div",C,m($.value.adults)+" adults, "+m($.value.children)+" children",1)]),u("div",D,[a[8]||(a[8]=u("div",{class:"detail-label"},"Total Price:",-1)),u("div",j,"$"+m($.value.total_price),1)]),u("div",q,[a[9]||(a[9]=u("div",{class:"detail-label"},"Payment Method:",-1)),u("div",P,m($.value.payment_method),1)]),u("div",A,[a[10]||(a[10]=u("div",{class:"detail-label"},"Booking Date:",-1)),u("div",S,m(Q($.value.booking_date)),1)]),"cancelled"===$.value.status?(d(),o("div",R,[a[11]||(a[11]=u("div",{class:"detail-label"},"Cancelled Date:",-1)),u("div",T,m(Q($.value.cancelled_date)),1)])):n("",!0)])])),_:1})])),_:1}),r(te,{class:"my-4"}),u("div",G,[a[13]||(a[13]=u("h3",{class:"text-subtitle-1 font-weight-bold mb-3"},"Special Requests",-1)),$.value.special_requests?(d(),o("p",I,m($.value.special_requests),1)):(d(),o("p",L,"No special requests"))])])),_:1}),"confirmed"===$.value.status?(d(),s(ie,{key:0},{default:i((()=>[r(V,{color:"error",variant:"outlined",onClick:O},{default:i((()=>a[14]||(a[14]=[v(" Cancel Booking ")]))),_:1})])),_:1})):n("",!0)])),_:1})])),_:1}),r(ae,{cols:"12",md:"4"},{default:i((()=>[r(ce,null,{default:i((()=>[r(Z,null,{default:i((()=>[r(X,{class:"text-h6 font-weight-bold"},{default:i((()=>a[15]||(a[15]=[v("Guest Information")]))),_:1})])),_:1}),r(se,null,{default:i((()=>[u("div",N,[a[16]||(a[16]=u("div",{class:"detail-label"},"Name:",-1)),u("div",z,m($.value.first_name)+" "+m($.value.last_name),1)]),u("div",E,[a[17]||(a[17]=u("div",{class:"detail-label"},"Email:",-1)),u("div",F,m($.value.email),1)]),u("div",M,[a[18]||(a[18]=u("div",{class:"detail-label"},"Phone:",-1)),u("div",U,m($.value.phone),1)])])),_:1})])),_:1})])),_:1})])),_:1})])):n("",!0)])),_:1})}}},[["__scopeId","data-v-235ae309"]]);export{V as default};
