import{P as r}from"./vendor-CRTejrwt.js";const e={},t="https://cdpoutqhdduzprdobfqt.supabase.co",n=(null==e?void 0:e.VITE_SUPABASE_SERVICE_KEY)||"";let i=null,o=null;const s=()=>(i||(i=r(t,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNkcG91dHFoZGR1enByZG9iZnF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzOTE2NjQsImV4cCI6MjA2MDk2NzY2NH0.ZwDNnQNqQgfm5LOTA6_81g44gqIFRLikPRW_wh87eRI")),i),c=()=>{if(!o){if(!n)return console.warn("Missing Supabase service key. Falling back to anon key for admin operations."),s();o=r(t,n)}return o};async function a(r,e={}){let t=s().from(r).select(e.select||"*");e.filters&&Object.entries(e.filters).forEach((([r,e])=>{null!=e&&(Array.isArray(e)?t=t.in(r,e):"object"==typeof e?Object.entries(e).forEach((([e,n])=>{t=t[e](r,n)})):t=t.eq(r,e))})),e.orderBy&&(t=t.order(e.orderBy,{ascending:!1!==e.ascending})),e.limit&&(t=t.limit(e.limit)),e.offset&&(t=t.offset(e.offset));const{data:n,error:i}=await t;if(i)throw console.error(`Error querying ${r}:`,i),i;return n||[]}async function l(r,e,t={}){let n=(t.useAdmin?c():s()).from(r).insert(e);t.upsert&&(n=n.upsert(e)),n=t.returning?n.select(t.returning):n.select();const{data:i,error:o}=await n;if(o)throw console.error(`Error inserting into ${r}:`,o),o;return i}async function u(r,e,t,n={}){let i=(n.useAdmin?c():s()).from(r).update(e);Object.entries(t).forEach((([r,e])=>{null!=e&&(i=Array.isArray(e)?i.in(r,e):i.eq(r,e))})),i=n.returning?i.select(n.returning):i.select();const{data:o,error:a}=await i;if(a)throw console.error(`Error updating ${r}:`,a),a;return o}export{s as getSupabase,l as insertData,a as selectData,u as updateData};
